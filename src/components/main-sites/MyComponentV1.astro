---
import { twMerge } from "tailwind-merge";
import * as api from "~/api/apiClient";

const apiResponse = await api.fetchElementsV0("getSites");
let sites = apiResponse.data;
interface NewSiteData {
  thumbnail: string;
  title: string;
  url: string;
  tags: string[];
  lastUpdated: string;
}

const components = {
  HeaderSearch: (await import("~/components/main-sites/sub/HeaderSearch.astro"))
    .default,
  /*
  SiteCards: (await import("~/components/main-sites/sub/SiteCardV1.astro"))
    .default,
    */
  CallToActionNew: (await import("~/components/dev/new/CalltToActionNew.astro"))
    .default,
};

const test = sites.data.slice(0, 5);

console.log(test);

interface Props {
  email?: string;
  user_name?: string;
  title?: string;
  subtitle?: string;
  content?: string;
  tagline?: string;
  /*
  components?: Array<{
    name: keyof typeof components;
    props?: Record<string, any>;
  }>;
  */
  sites: NewSiteData[];
  classes?: {
    container?: string;
    title?: string;
    subtitle?: string;
  };
}
---
