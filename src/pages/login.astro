---
import Layout from '~/layouts/Layout.astro'
import MyForm from '~/components/sub-pages/DoForm.astro'

import { previousPath, currentPath } from '~/store'

const to = currentPath.get()
const from = previousPath.get()
let title = ''
let action = '/api/v1/auth'
let text = ''
let doForm = ''
let isAuthForm = true


if(to === '/login') {  
  title = 'Log in'
  action = `${action}/signin`
  text = 'Sign in to access your account'
  doForm = 'login',
  isAuthForm
} 
if (to === '/register') {  
  title = 'Sign up'
  action = `${action}/register`
  text = 'Register a new account'
  doForm = 'register',
  isAuthForm
}

const myButton = {
  text: 'Login',
  class: 'w-full px-3 py-4 text-white bg-indigo-500 rounded-md focus:bg-indigo-600 focus:outline-none',
  variant: 'base'
}

---

<Layout title = 'Auth Page' />
<Fragment>
  <MyForm 
    inputs = {[
      {
        type: 'email',
        name: 'email',
        label: 'Email',
      },
      {
        type: 'password',
        name: 'password',
        label: 'Password',
      },
    ]}
    action = {action}
    title = {title}
    text = {text}
    doForm = {doForm}
    isAuthForm
    myButton={myButton}
  />
</Fragment>
